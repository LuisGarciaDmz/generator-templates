(window.webpackJsonp=window.webpackJsonp||[]).push([[119],{1239:function(e,t){e.exports=function(e){if(null==e)throw new TypeError("Cannot destructure "+e)},e.exports.__esModule=!0,e.exports.default=e.exports},1240:function(e,t,n){var a=n(219);e.exports=function(e){return(null==e?0:e.length)?a(e,1/0):[]}},1241:function(e,t,n){var a=n(352);e.exports=function(e){return e&&e.length?a(e):[]}},1278:function(e,t,n){"use strict";n.r(t);var a=n(124),r=n(885),i=n(41),s=n(887),o=n(1239),l=n.n(o),c=n(901),d=n(905),p=n(3),u=n.n(p),h=n(8),g=n.n(h),b=n(32),m=n.n(b),O=n(1240),f=n.n(O),v=n(1241),y=n.n(v),_=n(0),w=n.n(_),E=n(60),j=n(17),C=n(205),F=n.n(C),k=n(51),A=n(19),I=n(18),S=n(924),x=n(172),B=n(957),P=n(886),T=n(144),N=n(68),D=n(16),L=n.n(D),R=n(27),W=I.a.create({fundingOptionWrapper:{padding:"0 3px",overflow:"hidden"},radioButton:{":before":{border:"1px solid ".concat("#9DA3A6")},marginBottom:-1},disabledLabel:{cursor:"not-allowed"},radioButtonText:{display:"inline-block",width:290,margin:"0 0 10px 60px"},radioButtonTextRTL:{display:"inline-block",width:290,margin:"0 60px 10px 0px"},radioButtonSubText:{display:"block",fontSize:11},fundingOptionLogo:{position:"relative",top:"0",margin:0},feeLine:{margin:"0 0 10px 105px"},preferredCheckboxWrapper:{paddingLeft:60,margin:"15px 0 0 0",clear:"both"},preferredCheckbox:{":before":{border:"1px solid ".concat("#9DA3A6")}},firstTimeInfoWrapper:{margin:"15px 0 0"},preferredInfoLink:{display:"block",margin:"-12px 0 0 43px",cursor:"pointer"},fundingOptionContentWrapper:{float:"left"},preferredBadge:{marginLeft:103,padding:"1px 8px",background:"#eaf7e9",display:"inline-block"},preferredBadgeText:{fontSize:11,margin:0},lineSeparator:{border:"none"},greyedOut:{opacity:".3"},forceDisplayBlock:{display:"block"},preventIncorrectLabelWrap:{display:"inline-block",width:"calc(100% - 45px)"},preventIncorrectLabelWrapWithLogo:{display:"inline-block",width:"calc(100% - 104px)"},checkboxOutline:{":before":{outlineWidth:"0px"}},choiceCardArt:{position:"relative",top:"0",borderRadius:3,margin:"0 5px",maxWidth:40,boxShadow:"0px 1px 5px rgba(78, 70, 70, 0.47)"},fundingSecondaryText:{margin:"-8px 0px 3px 0px",float:"right",lineHeight:1},ppcreditSpecialOfferText:{marginRight:"2px",color:"#6c7378",[R.m]:{lineHeight:1.6}},offerEligibilityText:{color:T.gb,fontSize:14},disallowedReasonText:{margin:"0 0 0 8.5em",padding:"0.25em ",fontWeight:"bold",fontSize:"0.8em"},feeWaived:{color:T.Y}}),M=n(65),U=n(7),G=n(966),H=n(939),z=n(25),q=n.n(z),V=n(10),Y=n(262),K=n(340),J=n(341);function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var X=Object(V.a)("transfer/fundingSource"),Z=Object(V.a)("transfer/fundingOptionsSelector"),$=Object(V.a)("transfer/page/recipient"),ee=j.h.div({},e=>{var{disabled:t=!1}=e;return{opacity:t?"0.3":"1","& label":{cursor:t?"not-allowed":"pointer",display:"block"}}}),te=j.h.div({display:"flex",alignItems:"flex-start"}),ne=Object(E.css)({color:T.Rb,position:"absolute",right:0,top:0}),ae=Object(E.css)({color:T.tb,position:"absolute",right:0,top:0}),re=j.h.div({"& a":function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Y.b)}),ie=j.h.div({marginTop:"0.8rem","& label":{marginLeft:"1rem"}},e=>{var{shouldDisable:t=!1}=e;return{opacity:t?"0.3":"1","& label":{cursor:t?"not-allowed":"pointer"}}}),se=j.h.div({marginTop:"12px"});class oe extends w.a.Component{constructor(){super(...arguments),u()(this,"renderCheaperOptionWarning",()=>w.a.createElement("div",{className:"vx_alert vx_alert-help ".concat(Object(I.b)(W.firstTimeInfoWrapper))},w.a.createElement("p",{className:"vx_alert-text"},X("alert.cheaperAvailable")))),u()(this,"renderFeeLine",()=>{var{displayAmounts:{fee:e}}=this.props.fundingOption;return w.a.createElement(i.e,{"data-nemo":"choice-FI-Fee-".concat(this.props.index)},X("fee",{feeAmount:e}))}),u()(this,"showFeeWaived",()=>w.a.createElement(i.d,{strong:!0,"data-nemo":"choice-FI-Fee-Waived-".concat(this.props.index),style:{color:T.Y}},X("feeWaived"))),u()(this,"renderUnclaimedBalanceSubText",()=>w.a.createElement(i.e,null,Object(M.A)())),u()(this,"renderPreferredBadge",()=>w.a.createElement(d.b,{type:"feature",style:{marginTop:"0.5rem"}},X("badge.preferred"))),u()(this,"renderAccountType",()=>{var{fundingOption:e}=this.props;if(!this.props.isCardArtEnabled||Object(M.G)(e))return null;var t=Object(M.w)(e),n=Object(M.d)(t);return w.a.createElement(i.e,null,n)}),u()(this,"renderPPCreditSpecialOfferInfo",()=>{var{fundingOption:e}=this.props,t=Object(M.w)(e),n=Object(M.r)(t);return n&&w.a.createElement(i.e,L()({as:re},n))}),u()(this,"renderPreferredCheckbox",()=>{var{fundingOption:e,setPreferredId:t,handlePreferredCheckboxChange:n,togglePreferredLegalScrollOverpanel:a}=this.props,{id:s}=Object(M.w)(e),o=t&&t!==s;return w.a.createElement(ie,{shouldDisable:o,tabIndex:"0",role:"button"},w.a.createElement(c.a,{disabled:o,onChange:()=>n(s),id:"selection-instrument-preferred-checkbox","data-nemo":"choice-select-checkbox",label:w.a.createElement("div",{style:{margin:"0 0.5rem"}},w.a.createElement(i.d,null,X("checkbox.setPreferred")),w.a.createElement(r.a,{size:"sm",onClick:()=>{var e=this.props.getAnalyticsObject();Object(U.trackLinkWithData)("learnmore","main:p2p:choice:fioption","main:p2p:choice:fioption::node",e,"link"),a()}},X("link.learnMore")))}))}),u()(this,"shouldRenderWarningIcon",(e,t)=>{var{isSelected:n}=e,{cashAdvanceFeeApplies:a}=t;return!n&&a}),u()(this,"renderAdvisoryIcon",(e,t)=>{var{isSelected:n}=e,{instrumentDeclined:a}=t;return n?null:a&&Object(K.a)()?w.a.createElement(N.ke,{size:"sm",className:ae.toString()}):this.shouldRenderWarningIcon(e,t)?w.a.createElement(N.th,{size:"sm",className:ne.toString()}):null})}componentDidMount(){this.shouldScrollElementIntoView()&&setTimeout(()=>Object(J.b)(this.element),300)}shouldScrollElementIntoView(){var{isSelected:e,fundingOption:t,preventScrollIntoView:n}=this.props;return!n&&(!!Object(K.a)()&&(e&&Object(M.B)(t)))}render(){var{fundingOption:e,fundingOption:{id:t,feePaidByReceiver:n,isFirstFeeFree:a=!1},isSelected:r,disabled:o,handleSelect:l,isPurchase:c,cashAdvanceWarningContent:d=""}=this.props,p=!n,u=Object(M.w)(e),{isPreferred:h,thumbnail_logo_url:g,cashAdvanceFeeApplies:b,generic_issuer_name:m,instrumentDeclined:O}=u,f=r&&!h&&this.props.showPreferredCheckbox&&!Object(M.I)(e),v="";v=Object(M.I)(e)?Object(M.z)(u):Object(M.G)(e)?Object(M.g)(e,this.props.isCFPBEnabledCountry,this.props.userAccountType):Object(M.e)(u,this.props.isCFPBEnabledCountry,this.props.userAccountType,this.props.isCardArtEnabled);var y=this.props.isCardArtEnabled&&g?Object(I.c)(W.choiceCardArt):Object(I.c)(W.fundingOptionLogo),_=q()(Object(I.b)(y));return w.a.createElement("li",{style:{position:"relative"},ref:e=>this.element=e},w.a.createElement(ee,{disabled:o},w.a.createElement(B.a,{id:t,name:"fundingOption","data-nemo":"choice-FI-selector-".concat(this.props.index),tabIndex:r?0:-1,onChange:()=>l(e),value:t,checked:r,disabled:o,"aria-checked":r,htmlFor:t,label:w.a.createElement(w.a.Fragment,null,w.a.createElement(te,null,w.a.createElement("img",{alt:"",className:_,src:Object(M.j)(u,this.props.isCFPBEnabledCountry,this.props.userAccountType,this.props.isCardArtEnabled),width:50}),w.a.createElement("div",{style:{margin:"0 1rem"}},w.a.createElement(i.d,{"data-nemo":"choice-FI-Name-".concat(this.props.index)},v,Object(M.I)(e)&&this.renderUnclaimedBalanceSubText()),this.renderPPCreditSpecialOfferInfo(),this.renderAccountType(),w.a.createElement(P.c,null,w.a.createElement(P.a,null,Object(M.C)(u)&&w.a.createElement(i.e,{style:{color:T.fb}},X("label.sourceBalance",{amount:Object(M.o)(u)})),a?this.showFeeWaived():p&&this.renderFeeLine(),h&&this.renderPreferredBadge())))),c&&f&&this.renderPreferredCheckbox(),r&&O&&Object(K.a)()&&w.a.createElement(se,null,w.a.createElement(s.a,{type:"error",typeIconAriaLabel:$("error.icon"),"data-testid":"instrument-declined-alert"},Z("alert.instrumentDeclined"))),r&&b&&w.a.createElement(G.a,{stylesOverride:{marginTop:"12px"},messageOverride:Object(H.a)(d,m),handleOnClick:this.props.warningLabelOnClick}),this.renderAdvisoryIcon(this.props,u))})),w.a.createElement("hr",{className:Object(I.b)(Object(I.c)(W.lineSeparator))}))}}var le=oe,ce=n(899),de=Object(V.a)("transfer/fundingOptionsSelector"),pe=j.h.div({display:"flex",alignItems:"center",flexDirection:"column",gap:"20px",margin:"20px auto 0"});function ue(e){var{shouldHideAddCard:t,hasFundingOptions:n,handleAddCard:r,handleOkButton:i,showBackButton:s}=e;return!t&&!n?w.a.createElement(pe,null,w.a.createElement(a.a,{as:"a","data-testid":"disallowed-fi-add-new-cta",onClick:r},de("button.linkBankOrCardCTA")),s&&w.a.createElement(ce.a,{"data-testid":"disallowed-fi-back-button",onClick:i},de("button.back"))):w.a.createElement(pe,null,w.a.createElement(a.a,{as:"a","data-testid":"disallowed-fi-ok-cta",onClick:i},de("button.ok")))}var he=n(48),ge=n(34),be=Object(V.a)("transfer/fundingOptionsSelector"),me=Object(V.a)("transfer/page/recipient"),Oe=j.h.div({display:"flex",flexDirection:"column",padding:"0 12px"}),fe=j.h.ul({margin:"32px 0 0",listStyleType:"none"}),ve=j.h.h2({margin:"0px 0px 2rem"}),ye=j.h.li({padding:"4px",":not(:last-child)":{marginBottom:"25px"}}),_e=j.h.div({display:"flex",alignItems:"center"}),we=j.h.div({margin:"16px 0 0 66px"});var Ee=function(e){var{disallowedSources:t,isCFPBEnabledCountry:n,userAccountType:a,isCardArtEnabled:r,shouldHideAddCard:o,hasFundingOptions:l,isRenderedInOverpanel:c,handleAddCard:d,handleOkButton:p}=e,u=be(o?"disallowedFIs.instrumentDeclined":"disallowedFIs.instrumentDeclinedWithLinkageAllowed"),h=Object(I.b)(c?S.a.overpanelWrapper:S.a.pageWrapper),g=!c;return Object(_.useEffect)(()=>{Object(he.a)(ge.b.p2p_fi_unavailable_payment_methods_screen_shown({screen_state:l?"fi_available":"no_fi_available",fi_count_shown:t.length}))},[]),w.a.createElement(F.a,{title:be("a11y.unavailableMethods.title")},w.a.createElement("div",{className:Object(I.b)(S.a.fundingOptionsWrapper)},w.a.createElement("div",{className:h},w.a.createElement(Oe,{"data-testid":"disallowed-methods-view"},w.a.createElement(i.f,{size:"sm",as:ve},be("disallowedFIs.heading")),((e,t)=>{var n=be(!e&&!t?"disallowedFIs.descriptionWithLinkageAllowed":"disallowedFIs.description");return w.a.createElement(i.d,{"data-testid":"disallowed-fi-page-description"},n)})(o,l),t.length>0&&w.a.createElement(fe,null,t.map((e,t)=>{return w.a.createElement(ye,{key:t},w.a.createElement(_e,null,w.a.createElement("img",{alt:"",src:Object(M.j)(e,n,a,r),width:50}),w.a.createElement("div",{style:{margin:"0 16px"}},w.a.createElement(i.d,{"data-testid":"disallowed-fi-name"},e.bank_name),(o=e,c=Object(M.d)(o),w.a.createElement(i.e,null,c)))),e.instrumentDeclined&&!l&&w.a.createElement(we,null,w.a.createElement(s.a,{type:"error",typeIconAriaLabel:me("error.icon"),"data-testid":"disallowed-fi-instrument-declined-alert"},u)));var o,c})))),w.a.createElement(ue,{shouldHideAddCard:o,hasFundingOptions:l,handleAddCard:d,handleOkButton:p,showBackButton:g})))};class je extends w.a.Component{render(){var{index:e,fundingOption:t,isCFPBEnabledCountry:n,userAccountType:a,isCardArtEnabled:r}=this.props,i=Object(M.e)(t,n,a,r),s=this.props.isRTL?W.radioButtonTextRTL:W.radioButtonText,o=Object(I.c)(W.fundingOptionLogo);return w.a.createElement("li",{"data-test-id":"disallowed-funding-source"},w.a.createElement("div",{className:Object(I.b)(Object(I.c)(W.fundingOptionWrapper),W.greyedOut)},w.a.createElement("div",{className:"vx_radio ".concat(Object(I.c)(Object(I.b)(W.radioButtonWrapper)))},w.a.createElement("input",{id:e,name:"fundingOption",type:"radio",value:e,disabled:!0}),w.a.createElement("label",{htmlFor:e,className:Object(I.b)(Object(I.c)(W.radioButton),Object(I.c)(W.forceDisplayBlock),Object(I.c)(W.disabledLabel))},w.a.createElement("img",{alt:"",className:Object(I.b)(o),"data-testid":"disallowed-card-art",src:Object(M.j)(t,n,a,r),width:50}),w.a.createElement("p",{className:Object(I.b)(Object(I.c)(s),Object(I.c)(W.preventIncorrectLabelWrapWithLogo)),"data-nemo":"disallowed-choice-FI-Name-".concat(e)},i)))),w.a.createElement("hr",{className:Object(I.b)(Object(I.c)(W.lineSeparator))}))}}var Ce=Object(V.a)("transfer/preferredLegalScroll"),Fe=I.a.create({wrapper:{padding:"0 20px"},cancelButton:{margin:"40px auto 0",display:"block",width:200}});class ke extends w.a.Component{render(){return w.a.createElement("div",{className:Object(I.b)(Fe.wrapper)},w.a.createElement("h2",null,Ce("header")),w.a.createElement("h5",null,Ce("subHeader")),w.a.createElement("h4",null,Ce("willLi.header")),w.a.createElement("ul",null,w.a.createElement("li",null,Ce("willLi.shopOnline")),w.a.createElement("li",null,Ce("willLi.goodsAndServices"))),w.a.createElement("h4",null,Ce("wontLi.header")),w.a.createElement("ul",null,w.a.createElement("li",null,Ce("wontLi.shopStore")),this.props.isPSAEnabled?null:w.a.createElement("li",null,Ce("wontLi.friendsAndFamily")),w.a.createElement("li",null,Ce("wontLi.preapproved"))),w.a.createElement("p",null,Ce("main",{userAgreementLinkUrl:w.a.createElement("a",{href:this.props.userAgreementLinkUrl,target:"_blank"},Ce("legal.userAgreement"))})),w.a.createElement("button",{className:"".concat(Object(I.b)(Fe.cancelButton)," vx_btn"),onClick:this.props.handleCloseButton},Ce("button.close")))}}var Ae=ke,Ie=n(5),Se=n(884);function xe(e){return Object.values(Ie.b).includes(e.action)}function Be(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{contingencies:t}=e,n=t&&t.find(xe);return n||{}}var Pe=n(57),Te=n(26),Ne=n(13),De=n(44),Le=n(53),Re=n(921),We=n(192),Me=n(1),Ue=n(85),Ge=n(212),He=n(61),ze=n(1059),qe=I.a.create({bankContainer:{paddingLeft:"0"},bankInfo:{margin:"0 0 0 20px"},bankInfoMobile:{margin:"0 0 0 35px"}}),Ve=e=>{var{bank:t,isMobile:n}=e;return w.a.createElement(P.b,{className:Object(I.b)(qe.bankContainer)},w.a.createElement(P.c,null,w.a.createElement(P.a,{xs:1},w.a.createElement("img",{alt:"",className:null,src:t.src,width:50})),w.a.createElement(P.a,{xs:11},w.a.createElement(i.g,{size:"md",regular:!0,className:Object(I.b)(n?qe.bankInfoMobile:qe.bankInfo)},t.title),w.a.createElement(i.g,{size:"sm",regular:!0,className:Object(I.b)(n?qe.bankInfoMobile:qe.bankInfo)},t.accountType))))},Ye=n(46),Ke=n.n(Ye),Je=["pageGroup","pageName"];function Qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qe(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ze="main:p2p:send:bank_realtime_balance_user_consent",$e={pageImpression:{pageGroup:Ze,pageName:"".concat(Ze,":"),event_name:"bank_realtime_balance_user_consent_screen_shown",event_type:"im"},agreeAndLogin:{pageGroup:Ze,pageName:"".concat(Ze,":"),link:"agree and log in",event_name:"bank_realtime_balance_user_consent_agree_pressed",event_type:"cl"},payAnotherWay:{pageGroup:Ze,pageName:"".concat(Ze,":"),link:"pay another way",event_name:"bank_realtime_balance_user_consent_deny_pressed",event_type:"cl"}};function et(e){var t="openBankingReConsent"===e?"Y":"N",{event_name:n,event_type:a,pageGroup:r,pageName:i}=$e.pageImpression;Object(U.trackImpression)(r,i,{rtb_consent:t}),Object(U.trackImpression)(r,i,{event_name:n,event_type:a,product:"p2p",has_realtime_balance_user_consent:t}),Object(he.a)({event_name:n,event_type:a,has_realtime_balance_user_consent:t})}function tt(e){var{event_name:t,event_type:n,pageGroup:a,pageName:r,link:i}=$e[e];Object(U.trackLinkWithData)(i,a,r,{event_name:t,event_type:n,product:"p2p"},"link"),Object(U.trackLinkWithData)(i,a,r,{},"link"),Object(he.a)({event_name:t,event_type:n,link:i})}function nt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Xe({event_type:"ac",e:"ac"},e),{pageGroup:n,pageName:a}=t,r=Ke()(t,Je);Object(U.trackActivity)(n,a,r),Object(he.a)(r)}var at=Object(V.a)("transfer/inc/openBanking");class rt extends _.Component{constructor(){super(...arguments),u()(this,"styles",I.a.create({obHeader:{textAlign:"center",marginBottom:"2.5rem"},obInfo:{margin:this.props.isMobile?"1.625rem 0":"2rem 0"},privacyLink:{fontSize:"0.8125rem",lineHeight:"1.125rem"},obAgreeBtn:{display:"block",margin:"1rem auto",width:this.props.isMobile?"100%":"50%"},payAnotherWay:{":hover":{cursor:"pointer"}}})),u()(this,"handleClose",()=>{tt("payAnotherWay"),this.props.dispatch(Object(De.x)({show:!1}))}),u()(this,"handleContinue",()=>{tt("agreeAndLogin"),this.props.handleNext()}),u()(this,"getAggregatorName",()=>{switch(this.props.country){case"DE":return at("openBanking.aggregatorName.figo");case"GB":return at("openBanking.aggregatorName.tink");default:return at("openBanking.aggregatorName.yodlee")}}),u()(this,"renderDisclosureStatement",()=>{var{country:e}=this.props,t=this.getAggregatorName(),n=w.a.createElement(r.a,{href:"/".concat(e,"/webapps/mpp/ua/privacy-full"),target:"_blank",className:Object(I.b)(this.styles.privacyLink)},at("openBanking.privacyStatement"));return"DE"===e?w.a.createElement(w.a.Fragment,null,w.a.createElement(i.g,{size:"sm",className:Object(I.b)(this.styles.obInfo)},at.html("openBanking.informationDE")),w.a.createElement(i.g,{size:"sm",className:Object(I.b)(this.styles.obInfo)},at("openBanking.privacyStatementDE",{privacyStatementLink:n}))):"GB"===e?w.a.createElement(w.a.Fragment,null,w.a.createElement(i.g,{size:"sm",className:Object(I.b)(this.styles.obInfo)},at.html("openBanking.informationGB")),w.a.createElement(i.g,{size:"sm",className:Object(I.b)(this.styles.obInfo)},at("openBanking.privacyStatementGB",{privacyStatementLink:n}))):w.a.createElement(i.g,{size:"sm",className:Object(I.b)(this.styles.obInfo)},at("openBanking.information",{privacyStatementLink:n,aggregatorName:t}))})}componentDidMount(){var{selectedFundingOption:e}=this.props;Be(e).action===Ie.b.INVALID_CREDENTIALS?et("openBankingReConsent"):et("openBankingObtainConsent")}render(){var{selectedFundingOption:e,isCFPBEnabledCountry:t,userAccountType:n,isCardArtEnabled:s,country:o}=this.props,l=Object(M.c)(e,t,n,s),c=at("openBanking.header");return"DE"===o&&(c=at("openBanking.headerDE")),w.a.createElement(P.b,null,w.a.createElement(P.c,null,w.a.createElement(P.a,{sm:12},w.a.createElement(i.g,{size:"xl2",regular:!0,className:Object(I.b)(this.styles.obHeader)},c))),w.a.createElement(P.c,null,w.a.createElement(P.a,{sm:12},w.a.createElement(Ve,{bank:l,isMobile:this.props.isMobile}))),w.a.createElement(P.c,null,w.a.createElement(P.a,{sm:12},this.renderDisclosureStatement())),w.a.createElement(P.c,null,w.a.createElement(P.a,{sm:12,style:{textAlign:"center"}},w.a.createElement(a.a,{onClick:this.handleContinue,className:Object(I.b)(this.styles.obAgreeBtn),"data-nemo":"agree-and-login"},at("openBanking.agreeAndLogin")))),w.a.createElement(P.c,null,w.a.createElement(P.a,{sm:12,style:{textAlign:"center"}},w.a.createElement(r.a,{onClick:this.handleClose,className:Object(I.b)(this.styles.payAnotherWay)},at("openBanking.payAnotherWay")))))}}var it=Object(k.b)((e,t)=>{var{server:n,transaction:a}=e;return{isMobile:n.isMobile,selectedFundingOption:t.selectedFundingOption||a.selectedFundingOption,isCFPBEnabledCountry:n.isCFPBEnabledCountry,userAccountType:n.userAccountType,isCardArtEnabled:n.features&&n.features.isCardArtEnabled,country:n.country}})(rt),st=Object(V.a)("transfer/inc/openBanking");var ot=Object(k.b)(e=>{var{overpanels:t}=e;return{showOpenBankingOverpanel:t.showOpenBankingOverpanel}},e=>({handleClose:()=>{e(Object(De.x)({show:!1}))}}))((function(e){var{showOpenBankingOverpanel:t,handleNext:n,handleClose:a,selectedFundingOption:r}=e;return w.a.createElement(Se.default,{show:t,handleClose:()=>a(),a11yTitle:st("openBanking.header")},w.a.createElement(F.a,{title:"Paypal: ".concat(st("openBanking.header"))},w.a.createElement(it,{handleNext:n,selectedFundingOption:r})))})),lt=n(163),ct=n(210),dt=n(1064),pt=n(1023),ut=n(12),ht=n(119),gt=n(97),bt=n(1002);function mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mt(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.d(t,"FundingOptionSelector",(function(){return At}));var ft=Object(V.a)("transfer/fundingOptionsSelector"),vt=Object(V.a)("transfer/alert"),yt=j.h.h2({margin:"0px auto 2rem"}),_t=j.h.button({background:"none",border:"none",padding:0,cursor:"pointer",outline:"inherit",float:"right"}),wt=j.h.button({background:"none",border:"none",padding:0,cursor:"pointer",outline:"inherit",float:"left"}),Et=j.h.div({display:"flex",justifyContent:"center",margin:"20px auto 0"}),jt=j.h.div({padding:"0 3px","& label":{marginBottom:0}},e=>{var{isDisabled:t=!1}=e;return{"& label":{opacity:t?.3:1}}}),Ct=j.h.div({marginBottom:16}),Ft=j.h.div({display:"flex",justifyContent:"center",margin:"24px 0"}),kt=Object(bt.a)()?_.Fragment:e=>{var{children:t}=e;return w.a.createElement(x.a,{interval:130,beforeClassName:Object(I.b)(S.a.staggerBefore),afterClassName:Object(I.b)(S.a.staggerAfter),children:t})};class At extends w.a.Component{constructor(){var e;super(...arguments),e=this,u()(this,"state",{showOnlyThreeFundingOptions:!0,showPreferredLegalScroll:!1,balanceToggleIsChecked:!1,selectedFundingOption:{},setPreferredId:"",showUnavailableFIPage:!1}),u()(this,"buildBalanceToggleMap",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=n.length?n:e.props.fundingOptions;return Object(M.k)(a).reduce((e,n)=>(e[n.id]=t.includes(n.id),e),{})})),u()(this,"getListFromBalanceToggleMap",e=>Object.keys(e).filter(t=>e[t])),u()(this,"buildSortedFundingOptions",e=>{var t=[],n=e.filter(e=>Object(M.G)(e)||1===e.funding_sources.length);return n.forEach(n=>{if(Object(M.G)(n))return t.push(n);var a=n.funding_sources[0].id,r=e.filter(e=>{var{funding_sources:t}=e;return t.some(e=>e.id===a)});t=t.concat(r)}),e.forEach(e=>{if(!Object(M.G)(e)){var{id:a}=Object(M.v)(e);n.filter(e=>!Object(M.G)(e)).map(e=>e.funding_sources[0].id).includes(a)||t.push(e)}}),t}),u()(this,"shouldShowBalanceToggle",()=>!!Object(M.k)(this.props.fundingOptions).length),u()(this,"buildPayRequestPreviewRoute",(e,t)=>"/payRequest/".concat(e,"/").concat(t)),u()(this,"buildSendBuyPreviewRoute",e=>{var t=e?"buy":"send";return this.unified?"/homepage/".concat(t,"/preview"):"/".concat(t,"/preview")}),u()(this,"shouldDisableBalanceToggle",e=>{var{sortedFundingOptions:t,selectedFundingOption:n,balanceToggleMap:a}=this.state,{funding_sources:r=[]}=n,i=r.map(e=>e.id),s=this.getListFromBalanceToggleMap(a),o=y()([...i,...s,e.id]);return!!Object(M.G)(n)||!t.filter(e=>!Object(M.G)(e)).some(e=>{var{funding_sources:t=[]}=e;return o.every(e=>t.some(t=>{var{id:n=""}=t;return n===e}))})}),u()(this,"togglePreferredLegalScrollOverpanel",()=>{this.setState({showPreferredLegalScroll:!this.state.showPreferredLegalScroll})}),u()(this,"resolveRTBContingencies",(function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1?arguments[1]:void 0,{successfullyAddedFundingInstrumentIds:a,fundingOptions:r,dispatch:i}=e.props,{selectedFundingOption:s}=e.state,o=!!s.id;Object(he.a)(Ot(Ot(Ot(Ot({},ge.a),e.analyticsStrings),e.getAnalyticsObject()),{},{event_name:"p2p_fi_selector_resolve_contingency_called",event_type:"ac"}));var l=o?s:Object(M.q)(r,a),c=Be(l).action;c===Ie.b.REFRESH||t&&(c===Ie.b.INVALID_CREDENTIALS||c===Ie.b.CONSENT)?i(Le.q(c,e.handleNextButton,l.id,n,t=>{nt(Ot(Ot(Ot({},e.analyticsStrings),e.getAnalyticsObject()),t?{event_name:"p2p_fi_contingency_resolved",status:t}:{event_name:"p2p_fi_contingency_called"}))})):c!==Ie.b.CONSENT&&c!==Ie.b.INVALID_CREDENTIALS||i(De.x({show:!0}))})),u()(this,"handleAddCard",()=>{var e=Object(Ge.c)(Object(Te.a)()),t=this.getAnalyticsObject(),{pageGroup:n,pageName:a}=this.analyticsStrings;Object(U.trackLinkWithData)(e,n,a,t,"link"),Object(he.a)(ge.b.p2p_fi_add_pressed());var r=Object(He.isIframe)()?window.top:window,i=Ot({flowType:Object(Te.a)(),amount:this.props.amount,currencyCode:this.props.currencyCode,payerId:this.props.payerId,recipient:this.props.recipient,displayName:this.props.displayName,thumbnailUrl:this.props.thumbnailUrl,networkId:this.props.networkId,obFlow:Me.D.ADD_BANK,unilateralName:this.props.unilateralName,unilateralCountryCode:this.props.unilateralCountryCode,mayCashAdvanceFeesApply:this.props.mayCashAdvanceFeesApply,isPurchase:this.props.isPurchase,mgmTrafficSource:Object(ht.a)(),flowIntent:this.props.flowIntent,env:this.props.env,note:this.props.note,isFirstFeeFreeEligible:this.props.isFirstFeeFreeEligible,token:this.props.token},Object(gt.a)()),s=Object(Ge.a)(i);Object(ct.a)()?Object(A.e)("/myaccount/transfer/flow/fi/new",i).then(e=>{var{redirectURL:t={}}=e;r.location.assign(t)}).catch(e=>this.props.dispatch(Ne.showError(e))):r.location.assign(s)}),u()(this,"handleNextButton",e=>{var t=this.getAnalyticsObject(),{selectedFundingOption:{id:n},setPreferredId:a,selectedFundingOption:r}=this.state,{requestId:i,requestLegId:s,isPurchase:o,pStudioContent:l,recipientAccountType:c,recipientCountry:d,fromCurrencyCode:p,currencyCode:u,noteLength:h,hasBalance:b}=this.props,m=Object(lt.a)()&&r.hasRTBContingency,O=!!Object.keys(r).length&&r.funding_sources.map(e=>e.id)||"nodefault";Object(he.a)(ge.b.p2p_fi_next_pressed(Ot(Ot({},Object(M.n)(r)),{},{fi_id:n,fi_selected:n,receiver_country:d,payment_type:o?"purchase":"personal",receiver_currency:u,note_character_length:h,balance_toggle:b?"y":"n",sender_currency:p,receiver_account_type:c,default_fi:Array.isArray(O)?O[0]:O})));var{funding_sources:f}=this.state.selectedFundingOption,v=f.some(e=>!0===e.cashAdvanceFeeApplies),y=g()(l,"p2p_cash_advance_fees_disclosure_touchpoint.noContent204",!1);if("cashadvancefee-override-pglk"===e)t.pglk="main:p2p:unified:cashadvancedisclaimer|continue";else if(v&&!y)return void this.props.dispatch(De.m({show:!0,selectedFundingOption:this.state.selectedFundingOption,type:"ACTIONS"}));if(m)this.resolveRTBContingencies();else{if(this.props.dispatch(Ne.changeSelectedFundingOption(n,t)),a&&this.props.dispatch(Le.u(a)),this.props.isRenderedInOverpanel)return this.props.dispatch(De.w({show:!1})),void(this.props.showCashAdvanceFeesOverpanel&&setTimeout(()=>{this.props.dispatch(De.m({show:!1,selectedFundingOption:this.state.selectedFundingOption,type:"ACTIONS"}))},500));var _=i?this.buildPayRequestPreviewRoute(i,s):this.buildSendBuyPreviewRoute(o);Object(Pe.b)(_)}}),u()(this,"getAnalyticsObject",()=>{var e,{selectedFundingOption:t={},setPreferredId:n}=this.state,{fundingOptions:a,isPurchase:r,successfullyAddedFundingInstrumentIds:i,fundingOptionIdFromSession:s,isOpenBankingReconsentFlow:o,isOpenBankingAbandonment:l,openBankingError:c}=this.props,d=!!Object.keys(t).length,p=(e={},d&&(e=t.funding_sources.find(e=>n===e.id||e.isPreferred)),e),u=p||Object(M.u)(a)||{id:""},h=d&&t.funding_sources.map(e=>e.id),g=this.buildSortedFundingOptions(a),b=Object(M.x)(g,[]),O=d&&t.funding_sources.some(e=>!0===e.cashAdvanceFeeApplies),v=h?h.toString():"nodefault",y=r?"g&s":"f&f",_=u.id||"notset",w=p?"Y":"N",E=f()(b.map(e=>e.funding_sources.map(e=>e.id))).toString()||"",j=Object(M.w)(t)||{},C=Object(M.p)(j),F=Object(Ue.c)(t),k=!m()(F),A=k?F.three_ds_reference_id:"",I=Be(t).action;return I===Ie.b.INVALID_CREDENTIALS&&(I=Ie.b.REFRESH),{fltp:y,dfl_fmxid:v,pref_fmxid:_,is_pref:w,ofr_fmxid:E,flfr:"choice",message_shown:O?"y":"n",is_3ds_eligible:k,"3ds_ref_id":A,sel_fmx_tp:C,chosen_fi_id:j.id,contingency_return:I||"none",chosen_fo_id:t.id,fundingOptionIdFromSession:s,hasRTBContingency:t.hasRTBContingency,isOpenBankingReconsentFlow:o,isOpenBankingAbandonment:l,isOpenBankingTreatment:Object(lt.a)(),successfullyAddedFundingInstrumentIds:i,openBankingError:c,raw_contingency_return:Be(t).action}}),u()(this,"handleBackButton",()=>{if(Object(he.a)(ge.b.p2p_fi_back_pressed()),this.props.isRenderedInOverpanel)return this.props.dispatch(De.w({show:!1}));this.props.dispatch(Le.a()),Object(Pe.a)()}),u()(this,"handleFundingOptionChange",e=>{var{setPreferredId:t,balanceToggleMap:n,sortedFundingOptions:a}=this.state,{funding_sources:r}=e,i=!Object(M.F)(e,a),s=!r.some(e=>e.id===t),o=r.some(e=>!0===e.cashAdvanceFeeApplies),{pageGroup:l,pageName:c}=this.analyticsStrings;Object(he.a)(ge.b.p2p_fi_selection_pressed({fi_selection_switched:"y",fi_warning_type:o?"cash_advance":""})),this.setState({selectedFundingOption:e,balanceToggleMap:i?this.buildBalanceToggleMap():n,setPreferredId:s?"":t},()=>{var e=this.getAnalyticsObject();Object(U.trackLinkWithData)("changeFI",l,c,e,"link")})}),u()(this,"handlePreferredCheckboxChange",e=>{if(We.a())this.props.dispatch(We.b());else{var t=this.state.setPreferredId===e;this.setState({setPreferredId:t?"":e})}}),u()(this,"handleBalanceToggle",e=>{var{sortedFundingOptions:t,selectedFundingOption:n,balanceToggleMap:a}=this.state,r=Ot(Ot({},a),{},{[e]:!a[e]}),i=this.getListFromBalanceToggleMap(r),s=Object(M.x)(t,i);this.setState({balanceToggleMap:r,selectedFundingOption:Object(M.m)(n,s)})}),u()(this,"handleShowMore",e=>{e.preventDefault(),this.setState({showOnlyThreeFundingOptions:!1})}),u()(this,"handleShowCashAdvanceFeeOverpanel",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"inlineMoreInfo";event.preventDefault(),Object(he.a)(ge.b.p2p_fi_selection_warning_pressed({fi_warning_type:"cash_advance"})),Object(Re.a)(t),e.props.dispatch(De.m({show:!0,type:"ABOUT",selectedFundingOption:e.state.selectedFundingOption}))})),u()(this,"handleOpenBankingAgreeButton",()=>{var{selectedFundingOption:e}=this.state,t=Object(M.w)(e),n=Object(M.i)(t.id);this.props.dispatch(Le.n(Ot({flowType:Object(Te.a)(),amount:this.props.amount,currencyCode:this.props.currencyCode,payerId:this.props.payerId,recipient:this.props.recipient,fundingSourceId:n,fundingOptionId:e.id,fundingOptionsData:Ot(Ot({},this.props.fundingOptionsData),{},{selectedFundingOptionId:e.id}),obFlow:Me.D.CONSENT_CONTINGENCY,unilateralName:this.props.unilateralName,unilateralCountryCode:this.props.unilateralCountryCode,displayName:this.props.displayName,thumbnailUrl:this.props.thumbnailUrl,networkId:this.props.networkId,mgmTrafficSource:Object(ht.a)(),isPurchase:this.props.isPurchase,flowIntent:this.props.flowIntent,env:this.props.env,token:this.props.token},Object(gt.a)())))}),u()(this,"handleOkButton",()=>{var{hasFundingOptions:e}=this.props;if(e)return this.handleToggleUnavailableFIPage();this.handleBackButton()}),u()(this,"handleToggleUnavailableFIPage",()=>{var{showUnavailableFIPage:e}=this.state;this.setState({showUnavailableFIPage:!e})}),u()(this,"renderSpacer",e=>w.a.createElement("hr",{className:Object(I.b)(S.a.dynamicSpacer),style:{height:e}})),u()(this,"renderPreferredBadge",()=>w.a.createElement("div",{className:Object(I.b)(S.a.preferredBadge)},w.a.createElement("p",{className:"vx_text-6_lighter ".concat(Object(I.b)(S.a.preferredBadgeText,S.a.preventIncorrectLabelWrap))},ft("preferred")))),u()(this,"renderBalanceToggle",e=>{var{isPreferred:t,id:n}=e,{balanceToggleMap:a}=this.state,r=a[n],i=this.shouldDisableBalanceToggle(e);return w.a.createElement(jt,{isDisabled:i,key:n},w.a.createElement(c.a,{id:"H-toggle-".concat(n),onChange:()=>this.handleBalanceToggle(n),checked:r,disabled:i,label:Object(M.b)(e,this.props.isCFPBEnabledCountry,this.props.userAccountType),helperText:t&&w.a.createElement(d.b,{style:{marginTop:"0.25rem"},type:"feature"},ft("badge.preferred"))}))}),u()(this,"renderFundingOptionAlert",()=>w.a.createElement("div",{className:"vx_alert vx_alert-help ".concat(Object(I.b)(S.a.fundingOptionAlertWrapper))},w.a.createElement("p",{className:"vx_alert-text"},ft("alert.preferredDisallowed")))),u()(this,"renderDisallowedFIs",()=>{var{isCFPBEnabledCountry:e,userAccountType:t,isCardArtEnabled:n,shouldHideAddCard:a,isRenderedInOverpanel:r,hasFundingOptions:i}=this.props;return w.a.createElement(Ee,{disallowedSources:this.getFilteredDisallowedSources(),isCFPBEnabledCountry:e,userAccountType:t,isCardArtEnabled:n,shouldHideAddCard:a,hasFundingOptions:i,isRenderedInOverpanel:r,handleAddCard:this.handleAddCard,handleOkButton:this.handleOkButton})}),u()(this,"renderUnavailableFIWarning",()=>{var{isAddBankFlow:e,accountType:t,fundingOptions:n}=this.props,a=n.length>0?"warning.OB.paymentMethodDisabled":"warning.OB.paymentMethodDisabledNoFIs",r=e?"warning.OB.paymentMethodUnavailable":a;return w.a.createElement(pt.a,{accountType:t,contentKey:r,style:{marginBottom:"20px"}})}),u()(this,"renderInformationalFees",()=>Object(K.a)()?null:w.a.createElement("div",{className:"".concat(Object(I.b)(S.a.inlineWarningContainer))},w.a.createElement("p",{className:"ppvx_text--sm ".concat(Object(I.b)(S.a.inlineWarningBlurb))},ft("warning.inline.text")),w.a.createElement("button",{className:"vx_btn-link ppvx_text--sm ppvx_text--medium ".concat(Object(I.b)(S.a.inlineWarningInfoLink)),onClick:()=>this.handleShowCashAdvanceFeeOverpanel("moreInfo")},ft("warning.inline.link")))),u()(this,"getFilteredDisallowedSources",()=>{var{disallowedSources:e}=this.props;return Object(K.a)()?this.props.disallowedSources:e.filter(e=>e.instrument_type!==Ie.h.HOLDING&&"CIP_REQUIRED"!==e.reason)}),u()(this,"shouldShowDisallowedSources",()=>{var{hasDisallowedSources:e}=this.props;return Object(K.a)()&&e}),u()(this,"renderLinkUnderCTA",()=>this.shouldShowDisallowedSources()?w.a.createElement(Et,null,w.a.createElement(ce.a,{"data-test-id":"unavailable-payment-methods-link",onClick:this.handleToggleUnavailableFIPage},ft("disallowedFIs.heading"))):w.a.createElement(Et,null,w.a.createElement(ce.a,{data:"unit-test-back-button",onClick:this.handleBackButton},ft("button.back"))))}componentWillMount(){var{unified:e,currencyCode:t,fromCurrencyCode:n,noteLength:a,recipientCountry:r,recipientAccountType:i,isPurchase:s,hasBalance:o,isCrowdFundingCampaign:l=!1,overpanelIsOpen:c,fundingOptionIdFromSession:d,isOpenBankingReconsentFlow:p,isRenderedInOverpanel:u,isOpenBankingAbandonment:h,openBankingError:g}=this.props;this.unified=e;var b=this.unified?"unified:":"";this.analyticsStrings={pageGroup:"main:p2p:".concat(b,"choice:fioption"),pageName:"main:p2p:".concat(b,"choice:fioption::node")};var{selectedFundingOption:O,fundingOptions:f}=this.props,v=!!O.id,y=f[0]||{};O=v?O:y;var _=Object(M.s)(O).map(e=>e.id),w=this.buildSortedFundingOptions(f),E=f&&f.filter(e=>e.funding_sources&&e.funding_sources[0]&&!0===e.funding_sources[0].cashAdvanceFeeApplies).length,j=Object(M.x)(w,[]),C=j.map(e=>e.funding_sources.map(e=>e.id));C=[].concat(...C);var F=Object(M.w)(O)||{},k=Object(M.p)(F),A=Array.isArray(f)&&f.map(e=>{var t=Object(M.w)(e);return Object(M.p)(t)}),I=Object(Ue.c)(O),S=!m()(I),x=S?I.three_ds_reference_id:"",B=Be(O).action;B===Ie.b.INVALID_CREDENTIALS&&(B=Ie.b.REFRESH);var P=Ot({fltp:s?"g&s":"f&f",dfl_fmxid:!!Object.keys(O).length&&O.funding_sources.map(e=>e.id)||"nodefault",is_pref:Object.keys(O).length&&O.funding_sources.some(e=>e.isPreferred)?"Y":"N",ofr_fmxid:C.toString()||"",is_3ds_eligible:S,"3ds_ref_id":x,av_fmx_tp:A,sel_fmx_tp:k,eligible_fi_cnt:E,chosen_fi_id:F.id,contingency_return:B||"none"},l&&{flow:Me.q.CROWD_FUNDING}),{pageGroup:T,pageName:N}=this.analyticsStrings;!c&&u||(Object(U.trackImpression)(T,N,P),Object(he.a)(ge.b.p2p_fi_screen_shown({balance_available:o?"y":"n",receiver_country:r,payment_type:s?"purchase":"personal",receiver_currency:t,fi_eligible_count:E,note_character_length:a,sender_currency:n,receiver_account_type:i,default_fi:Array.isArray(P.dfl_fmxid)?P.dfl_fmxid[0]:P.dfl_fmxid,unavailable_payment_methods_link_shown:this.shouldShowDisallowedSources(),page_alert_shown:this.shouldShowDeclinedFIAlert()?"declined_fi":""})));var D=this.shouldShowOnlyThreeFundingOptions({selectedFundingOption:O,relevantFundingOptions:j});this.setState({sortedFundingOptions:w,selectedFundingOption:O,showOnlyThreeFundingOptions:D,balanceToggleMap:this.buildBalanceToggleMap(_)},()=>{Object(he.a)(Ot(Ot(Ot(Ot({},ge.a),this.analyticsStrings),this.getAnalyticsObject()),{},{event_name:"p2p_fi_selector_set_state_callback_called",event_type:"ac"})),O.hasRTBContingency&&O.id===d&&p&&!h&&this.resolveRTBContingencies(p,g)})}componentWillReceiveProps(e){var t=this.props,n=Object.assign({},(l()(t),t)),{successfullyAddedFundingInstrumentIds:a,fundingOptions:r}=e;if(a&&a.includes(",")&&r.length){this.props.dispatch(Ne.changeSelectedFundingOption(r[0].id,{}));var i=Object(M.s)(r[0]).map(e=>e.id);this.setState({selectedFundingOption:r[0],balanceToggleMap:this.buildBalanceToggleMap(i,r)})}var s=!n.hasAddedCard&&e.hasAddedCard;if(s&&this.setState({showOnlyThreeFundingOptions:!s}),n.fundingOptions!==e.fundingOptions){var o=Object(M.s)(e.selectedFundingOption).map(e=>e.id);this.setState({sortedFundingOptions:this.buildSortedFundingOptions(e.fundingOptions),selectedFundingOption:e.selectedFundingOption,balanceToggleMap:this.buildBalanceToggleMap(o),setPreferredId:""})}}componentWillUnmount(){this.props.dispatch(Le.r(""));var{unavailableFI:e}=this.props;e&&this.props.dispatch(Le.x(!1))}shouldShowDisallowedError(){var{isPreferredSourceDisallowed:e,disallowedSources:t}=this.props,n=Object(M.h)(t);return e&&!n}shouldShowDeclinedFIAlert(){var{disallowedSources:e}=this.props;return Object(K.a)()&&Object(M.D)(e)}renderDeclinedFIAlert(){var{disallowedSources:e}=this.props;if(!Object(K.a)())return null;var t=Object(M.h)(e);if(!t)return null;var n=Object(M.p)(t)||"",a=t.fi_last_4||"",r=n&&a?ft("alert.disallowedFundingInstrument",{fundingInstrumentName:n,lastFourDigits:a}):ft("alert.disallowedFundingInstrumentGeneric");return w.a.createElement(Ct,null,w.a.createElement(s.a,{type:"error",typeIconAriaLabel:vt("error.icon.label"),"data-test-id":"declined-fi-alert"},r))}shouldShowOnlyThreeFundingOptions(e){var{selectedFundingOption:t,relevantFundingOptions:n}=e,a=g()(t,"id");if(n&&a&&n.findIndex(e=>e.id===a)>=3)return!1;return!0}renderInlineDisallowedFundingOptions(){if(Object(K.a)())return null;var{isRTL:e,isCFPBEnabledCountry:t,userAccountType:n,isCardArtEnabled:a}=this.props;return this.getFilteredDisallowedSources().map((r,i)=>w.a.createElement(je,{key:"disallowed-"+i,index:i,isRTL:e,fundingOption:r,isCFPBEnabledCountry:t,userAccountType:n,isCardArtEnabled:a}))}render(){var{isRTL:e,isPurchase:t,userAccountType:n,isCardArtEnabled:s,isCFPBEnabledCountry:o,showPreferredCheckbox:l,pStudioContent:c,unavailableFI:d,hasDisallowedSources:p,hasFundingOptions:u,hasOnlyDisallowedFIs:h}=this.props;if(!u&&!p)return null;var{showUnavailableFIPage:b}=this.state,m=b||h;if(Object(K.a)()&&m)return this.renderDisallowedFIs();var O=this.shouldShowDisallowedError(),{selectedFundingOption:f,showOnlyThreeFundingOptions:v,showPreferredLegalScroll:y,setPreferredId:_,balanceToggleMap:j,sortedFundingOptions:C}=this.state,k=!!f.funding_sources,A=Object(I.b)(this.props.isRenderedInOverpanel&&S.a.overpanelWrapper,!this.props.isRenderedInOverpanel&&S.a.pageWrapper,this.props.shouldHideWrapperBorder&&S.a.noBorder),x=Object.keys(j).filter(e=>j[e]),B=Object(M.x)(C,x),{funding_sources:P=[]}=f,T=P.some(e=>!0===e.cashAdvanceFeeApplies),N=g()(c,"p2p_cash_advance_fees_inline_warning_touchpoint.content.json",{}),D=v?3:void 0,L=!k,W=Object(Ge.c)(Object(Te.a)()),{shouldHideAddCard:U}=this.props,G=this.shouldShowDeclinedFIAlert(),H=G||d||O;return w.a.createElement(F.a,{title:ft("a11y.title")},w.a.createElement("div",{className:Object(I.b)(S.a.fundingOptionsWrapper)},w.a.createElement("div",{className:A},w.a.createElement("form",null,w.a.createElement("fieldset",null,w.a.createElement("legend",{className:Object(I.b)(S.a.headerWrapper)},w.a.createElement(i.f,{size:"sm",as:yt},ft("howToPay"))),G&&this.renderDeclinedFIAlert(),d&&this.renderUnavailableFIWarning(),O&&this.renderFundingOptionAlert(),O&&this.shouldShowBalanceToggle()&&this.renderSpacer(20),Object(M.k)(C).map(this.renderBalanceToggle),(O||this.shouldShowBalanceToggle())&&this.renderSpacer(16),w.a.createElement("ul",{className:Object(I.b)(S.a.fundingOptionsListWrapper)},w.a.createElement("hr",{className:Object(I.b)(S.a.lineSeparator,S.a.topLineSeparator)}),w.a.createElement(kt,null,B.slice(0,D).map((a,r)=>w.a.createElement(le,{getAnalyticsObject:this.getAnalyticsObject,key:a.id,index:r,isRTL:e,fundingOption:a,isSelected:a.id===f.id,isPurchase:t,setPreferredId:_,handlePreferredCheckboxChange:this.handlePreferredCheckboxChange,handleSelect:this.handleFundingOptionChange,togglePreferredLegalScrollOverpanel:this.togglePreferredLegalScrollOverpanel,isCFPBEnabledCountry:o,userAccountType:n,isCardArtEnabled:s,showPreferredCheckbox:l,cashAdvanceWarningContent:N,warningLabelOnClick:this.handleShowCashAdvanceFeeOverpanel,preventScrollIntoView:H})),this.renderInlineDisallowedFundingOptions())),B.length>3&&v&&w.a.createElement(r.a,{as:_t,onClick:this.handleShowMore},ft("button.showMore")),!U&&w.a.createElement(r.a,{as:wt,onClick:this.handleAddCard,type:"button","data-nemo":"add-new-card"},ft("button.".concat(W)))))),T&&this.renderInformationalFees(),w.a.createElement(Ft,null,w.a.createElement(a.a,{className:Object(E.css)(Ot(Ot({},L&&{color:"#cbd2d6",background:"#f5f6f8",boxShadow:"none",border:"1px solid #cbd2d6",textDecoration:"none",cursor:"not-allowed",outline:"none",transform:"none",":after":{content:"none"}}),{},{[R.k]:{width:"100%",margin:"0 16px"}})).toString(),"data-nemo":"choice-next-button",onClick:this.handleNextButton,disabled:L},ft("button.next"))),this.renderLinkUnderCTA(),w.a.createElement(Se.default,{show:y,handleClose:this.togglePreferredLegalScrollOverpanel},w.a.createElement(Ae,{userAgreementLinkUrl:this.props.userAgreementLinkUrl,handleCloseButton:this.togglePreferredLegalScrollOverpanel,isPSAEnabled:this.props.isPSAEnabled})),w.a.createElement(ze.a,{cipStatus:this.props.cipStatus}),Object(lt.a)()&&w.a.createElement(ot,{selectedFundingOption:this.state.selectedFundingOption,handleNext:this.handleOpenBankingAgreeButton}),w.a.createElement(dt.a,{handleNext:this.handleNextButton})))}}u()(At,"defaultProps",{isRenderedInOverpanel:!1,ddcCalls:[],payerId:"",displayName:"",thumbnailUrl:""});t.default=Object(k.b)(e=>{var{transaction:t,server:n,overpanels:a,card:r,recipient:i,amount:s,external:o,unilateral:l,crossBorder:c,note:d}=e;return{hasAddedCard:r.addedCards.length>0,requestId:n.requestId,requestLegId:n.requestLegId,shouldHideWrapperBorder:n.env===Ie.d.PP_ME||n.env===Ie.d.POOLS,shouldHideBackButton:!!(n.env===Ie.d.PP_ME||n.env===Ie.d.POOLS||n.requestId&&n.requestLegId),shouldHideAddCard:n.env===Ie.d.PISP&&!o.addCardSupported,successfullyAddedFundingInstrumentIds:t.successfullyAddedFundingInstrumentIds,selectedFundingOption:t.selectedFundingOption,fundingOptions:t.fundingOptions,fundingOptionsData:{fundingOptions:t.fundingOptions,disallowedSources:t.disallowedSources,complianceInfo:t.complianceInfo,isPaypalAccount:i.isPaypalAccount,additionalDisclosureActions:t.additionalDisclosureActions,xbActualRecipientCountry:c.xbActualRecipientCountry,xbChosenCountry:c.xbChosenCountry,xbCountryMismatch:c.xbCountryMismatch,isCrowdFundingCampaign:t.isCrowdFundingCampaign,riskHoldOverpanelVariant:t.riskHoldOverpanelVariant,isPreferredSourceDisallowed:t.isPreferredSourceDisallowed,conversionType:t.conversionType,showFISelector:t.showFISelector},disallowedSources:t.disallowedSources,isPurchase:t.isPurchase,isCrowdFundingCampaign:t.isCrowdFundingCampaign,currencySeparator:t.currencySeparator,isPreferredSourceDisallowed:t.isPreferredSourceDisallowed,mayCashAdvanceFeesApply:"USD"===c.fromCurrencyCode&&"USD"===c.toCurrencyCode&&!t.isPurchase,userAgreementLinkUrl:n.userAgreementLinkUrl,overpanelIsOpen:a.fundingOptionsOverpanel,token:i.token,payerId:i.payerId,recipient:i.recipient,displayName:i.displayName,thumbnailUrl:i.thumbnailUrl,networkId:i.networkId,moneyPageOverPanel:i.moneyPageOverPanel,recipientCountry:i.country,recipientAccountType:i.recipientAccountType,amount:s.amount,note:d.note,currencyCode:s.currencyCode,fromCurrencyCode:s.fromCurrencyCode,cipStatus:o.cipStatus,isRTL:"rtl"===n.directionality,isCFPBEnabledCountry:n.isCFPBEnabledCountry,userAccountType:n.userAccountType,isCardArtEnabled:n.features&&n.features.isCardArtEnabled,showPreferredCheckbox:n.groupFeatures.showPreferredCheckbox,unilateralName:l.name,unilateralCountryCode:l.countryCode,unavailableFI:t.unavailableFI,accountType:t.accountType,pStudioContent:n.pStudioContent,showCashAdvanceFeesOverpanel:a.showCashAdvanceFeesOverpanel,showGenericAboutCashAdvanceFeesOverpanel:a.showGenericAboutCashAdvanceFeesOverpanel,cashAdvanceFeesOverpanelContentType:a.cashAdvanceFeesOverpanelContentType,noteLength:d.note.length,hasBalance:g()(n,"userConfig.features.balance"),isOpenBankingReconsentFlow:Object(lt.a)()&&ut.a.obFlow===Me.D.CONSENT_CONTINGENCY,fundingOptionIdFromSession:g()(ut.a,"fundingOptionsData.selectedFundingOptionId",""),isAddBankFlow:ut.a.obFlow===Me.D.ADD_BANK,isOpenBankingAbandonment:!(t.openBankingError||t.successfullyAddedFundingInstrumentIds),openBankingError:t.openBankingError,flowIntent:n.flowIntent,env:n.env,isPSAEnabled:n.isPSAEnabled,isFirstFeeFreeEligible:t.isFirstFeeFreeEligible,hasDisallowedSources:t.disallowedSources.length>0,hasFundingOptions:t.fundingOptions.length>0,hasOnlyDisallowedFIs:0===t.fundingOptions.length&&t.disallowedSources.length>0}})(At)}}]);
//# sourceMappingURL=funding-option-selector.esm.js.map